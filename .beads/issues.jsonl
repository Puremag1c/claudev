{"id":"claudev-06l","title":"Conditional gitleaks recommendation","description":"Автоматическая установка и настройка gitleaks:\n\n1. Если есть GitHub remote → попробовать установить gitleaks (brew/apt)\n2. Если установилось → настроить pre-commit hook автоматически\n3. Если не установилось или нет GitHub → пропустить МОЛЧА\n\nНикаких 'рекомендаций', никаких предупреждений. Пользователь непрограммист.\n\nfiles: bin/claudev, install.sh\ndone_when: gitleaks ставится автоматически при наличии GitHub, или пропускается без noise","status":"closed","priority":2,"issue_type":"task","assignee":"m","created_at":"2026-01-28T09:27:39.155617+03:00","created_by":"m","updated_at":"2026-01-28T10:04:27.029052+03:00","closed_at":"2026-01-28T10:04:27.029052+03:00","close_reason":"Implemented: auto-install gitleaks + pre-commit hook when GitHub remote exists","dependencies":[{"issue_id":"claudev-06l","depends_on_id":"claudev-0ss","type":"blocks","created_at":"2026-01-28T09:27:45.024474+03:00","created_by":"m"},{"issue_id":"claudev-06l","depends_on_id":"claudev-h9q","type":"parent-child","created_at":"2026-01-28T09:37:34.123551+03:00","created_by":"m"}]}
{"id":"claudev-0ax","title":"Создать config.yaml шаблон","description":"Создать шаблон конфигурации для целевого проекта\n\n**Файл:** templates/config.template.yaml\n\n**Содержимое:**\n```yaml\n# Claudev configuration\n# Копируется в .claudev/config.yaml при установке\n\nci: false                    # GitHub Actions CI\ncd: false                    # GitHub Actions CD (releases)\nmax_parallel_executors: 3    # Параллельных Executor'ов\n\ntimeouts:\n  task: 10m                  # Таймаут на задачу\n  user_input: 30m            # Таймаут ожидания ответа user\n\nretry_limit: 3               # Попыток до эскалации\nlog_tokens: false            # Логировать расход токенов\n\ncleanup:\n  enabled: false             # Удалять старые логи\n  keep_days: 30              # Хранить N дней если enabled\n```\n\n**done_when:**\n- [ ] Файл templates/config.template.yaml создан\n- [ ] Все параметры из PROJECT.md включены\n- [ ] Комментарии на русском объясняют каждый параметр","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:06:58.702022+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Реализовано: templates/config.template.sh создан","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-0ss","title":"GitHub onboarding flow in claudev init","description":"Умный onboarding для GitHub при claudev init:\n\n1. Проверить gh auth status\n2. Если не авторизован:\n   - Спросить 'Есть аккаунт GitHub?'\n   - Да → помочь авторизоваться (gh auth login)\n   - Нет → работаем локально\n3. Если авторизован но нет remote:\n   - Спросить 'Создать GitHub репозиторий?'\n   - Да → gh repo create\n   - Нет → работаем локально\n4. Если всё есть → продолжаем\n\nЦелевая аудитория: непрограммисты, могут не знать что такое git/GitHub.\n\ndone_when: claudev init проводит пользователя через GitHub setup или явно говорит что работаем локально","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-28T09:27:39.039736+03:00","created_by":"m","updated_at":"2026-01-28T09:58:57.964173+03:00","closed_at":"2026-01-28T09:58:57.964173+03:00","close_reason":"Added setup_github() with auth and repo creation flow","dependencies":[{"issue_id":"claudev-0ss","depends_on_id":"claudev-h9q","type":"parent-child","created_at":"2026-01-28T09:37:34.0566+03:00","created_by":"m"}]}
{"id":"claudev-11j","title":"Решить: user silence handling","description":"После таймаута Tech Writer сохраняет draft. При следующем запуске: автоматически показать вопрос или ждать команды?","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-23T11:26:05.653367+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Решено: см. PROJECT.md (23 января)","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-1at","title":"Подтвердить: безопасность secrets","description":"Предложение: агенты не читают .env, тесты через mocks, CI через GitHub Secrets, проверка на hardcoded secrets. Нужно подтверждение.","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T11:26:05.540935+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Решено: средний уровень — .gitignore + gitleaks pre-commit + инструкции агентам","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-1dw","title":"test status","status":"tombstone","priority":4,"issue_type":"task","created_at":"2026-01-23T12:14:01.974254+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"test","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-1ij","title":"Написать промпт: Analyst-Security","description":"Написать промпт Analyst-Security\n\n**Файл:** core/agents/analyst-security.md\n\n**Frontmatter:**\n```yaml\n---\nname: analyst-security\ndescription: Проверяет безопасность, добавляет задачи\nmodel: sonnet\n---\n```\n\n**Роль:** Security аналитик. Проверяет план на уязвимости.\n\n**Критические правила:**\n- ТОЛЬКО добавлять задачи (не удалять, не менять)\n- Добавлять label: added-by:analyst-security\n- Security приоритетнее UX\n\n**Что проверять (OWASP Top 10):**\n- Injection (SQL, command, etc.)\n- Broken authentication\n- Sensitive data exposure\n- XXE, XSS, CSRF\n- Insecure deserialization\n- Security misconfiguration\n- Missing access control\n\n**Алгоритм:**\n1. Claim: bd update run-analyst-security --claim\n2. Прочитать SPEC.md и план\n3. Найти security проблемы\n4. Для каждой:\n```bash\nbd create --title=\"Security: \u003cпроблема\u003e\" --type=task --priority=1 --label=added-by:analyst-security\n```\n5. bd close run-analyst-security\n\n**Приоритеты:**\n- P0: Critical (auth bypass, RCE)\n- P1: High (XSS, injection)\n- P2: Medium (info disclosure)\n\n**done_when:**\n- [ ] Frontmatter с model: sonnet\n- [ ] OWASP Top 10 чеклист\n- [ ] Приоритеты по критичности\n- [ ] Формат задач с label\n- [ ] Логирование через log.sh","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-23T15:35:32.51816+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Промпты analysts созданы","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-1pu","title":"[P2] analyst-architecture.md: Simplify complex jq check for model labels","description":"files: core/agents/analyst-architecture.md\nproblem: Lines 41-52 have complex multi-line jq that Sonnet may misexecute\ncurrent: missing_model=$(bd list --format=json | jq -r '.[] | select(.type == \"task\") | select(.labels | map(startswith(\"model:\")) | any | not) | select(.title | test(\"^run-|^milestone:\") | not) | ...')\nfix: Either simplify jq or add helper script check-model-labels.sh\ndone_when: Check is simpler and reliable for Sonnet","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T16:49:33.29328+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Simplified jq to loop with simple checks per task","labels":["audit:prompt","model:sonnet"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-1t4","title":"Обновить README с новым способом установки","description":"files: README.md\ndone_when: README содержит новые инструкции\n\nНовые инструкции:\n```bash\n# Установка (один раз)\ncurl -fsSL https://raw.githubusercontent.com/.../install.sh | bash\n\n# В любом проекте\nclaudev init\n```","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-27T21:38:35.552329+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Обновлён с новым способом установки","labels":["model:haiku"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-260","title":"Auto-start beads daemon in claudev init","description":"При claudev init проверять bd daemon status и автоматически запускать если не работает.\n\nfiles: bin/claudev\ndone_when: claudev init работает без предварительного bd daemon start","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-28T09:27:38.90926+03:00","created_by":"m","updated_at":"2026-01-28T09:49:41.298028+03:00","closed_at":"2026-01-28T09:49:41.298028+03:00","close_reason":"Added auto-start beads daemon in cmd_init and cmd_start","dependencies":[{"issue_id":"claudev-260","depends_on_id":"claudev-h9q","type":"parent-child","created_at":"2026-01-28T09:37:33.993283+03:00","created_by":"m"}]}
{"id":"claudev-2mf","title":"[P2] senior-executor.md: Clean up reviewing label after completion","description":"files: core/agents/senior-executor.md\nproblem: Line 35 adds --add-label=reviewing but it's never removed after merge/return\nfix: Add --remove-label=reviewing to both merge and return paths\ndone_when: reviewing label is cleaned up in all exit paths","status":"tombstone","priority":2,"issue_type":"bug","created_at":"2026-01-26T16:49:33.667429+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Added --remove-label=reviewing to all exit paths: return, rollback, security, conflict","labels":["audit:prompt","model:sonnet"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"claudev-2mt","title":"[P3] orchestrator.sh: Add health check for claude CLI","description":"files: core/scripts/orchestrator.sh\nproblem: No check if claude CLI is available. If missing, agents fail with timeout.\nfix: Add check at startup:\n  if ! command -v claude \u0026\u003e/dev/null; then\n    log FATAL 'Claude CLI not found. Install: npm install -g @anthropic/claude-code'\n    exit 1\n  fi\ndone_when: orchestrator fails fast if claude CLI missing","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-26T16:49:43.331831+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Added claude CLI health check at startup","labels":["audit:script","model:haiku"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-2qk","title":"Создать analyst-security.md агента","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-23T15:06:58.924751+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Дубликаты: заменены на детальные задачи 'Написать промпт'","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-2si","title":"Integrate Web deployment MCP servers (Vercel, Netlify)","description":"Add optional MCP servers for web deployment: 1) Vercel MCP - preview deploys, domains, env vars 2) Netlify MCP - builds, functions, forms. Install based on user preference during init.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-28T11:30:51.45132+03:00","created_by":"m","updated_at":"2026-01-28T11:39:46.645655+03:00","closed_at":"2026-01-28T11:39:46.645655+03:00","close_reason":"Simplified: only 4 core MCP servers needed (GitHub, PostgreSQL, Supabase, Playwright)","dependencies":[{"issue_id":"claudev-2si","depends_on_id":"claudev-76w","type":"blocks","created_at":"2026-01-28T11:30:56.244891+03:00","created_by":"m"}]}
{"id":"claudev-2uv","title":"DESIGN: Защита от circular dependencies","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-23T15:10:52.955028+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Решено: bd dep cycles — Architect проверяет после создания, Manager перепроверяет перед IMPLEMENTATION","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-2zv","title":"[P1] executor.md: Add final commit after successful rebase","description":"files: core/agents/executor.md\nproblem: After successful rebase, executor only has WIP commit. No final commit with proper message.\ncurrent flow: WIP commit → rebase → push (still WIP message)\nfix: Add step 7 after successful rebase:\n  git reset --soft HEAD~1\n  git commit -m \"$TASK_TITLE\"\n  git push --force-with-lease\ndone_when: Final commit has proper message (not WIP)","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2026-01-26T16:49:13.635818+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Not needed — Senior Executor does squash merge with proper commit message (архитектурное решение #15 в PROJECT.md). WIP commit в ветке executor'а перезаписывается при merge --squash.","labels":["audit:prompt","model:sonnet"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"claudev-33v","title":"Fix heredoc syntax in orchestrator.sh","description":"ПРОБЛЕМА:\nСтрока 198: закрывающая ) стоит ДО тела heredoc\n```bash\nmanager_out=$(timeout ... \u003c\u003cEOF 2\u003e\u00261 || true)\n$(cat .claude/agents/manager.md ...)  # ЭТО ВЫПОЛНИТСЯ КАК КОМАНДА!\n```\n\nРЕШЕНИЕ:\n```bash\nmanager_out=$(timeout \"$TASK_TIMEOUT\" claude --model sonnet --print 2\u003e\u00261 \u003c\u003cEOF || true\n$(cat .claude/agents/manager.md 2\u003e/dev/null || echo '# not found')\n\n---\nPROJECT_ROOT: $PROJECT_DIR\nCURRENT_PHASE: $phase\nCYCLE: $cycle\nEOF\n)\n```\n\nfiles: core/scripts/orchestrator.sh\ndone_when: bash -n orchestrator.sh passes","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-26T10:53:40.043766+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Fixed in v0.4.1","deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-3h9","title":"MVP системы Claudev","notes":"Все вопросы решены. Готово к реализации: обновить файлы агентов под новую архитектуру.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-22T17:27:44.933512+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Разбито на детальные задачи","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-3la","title":"Создать claudev CLI wrapper","description":"files: bin/claudev (новый файл)\ndone_when: claudev init/start/status работают\n\nCLI wrapper (bash):\n- claudev init → вызывает core/scripts/init-project.sh\n- claudev start → вызывает core/scripts/orchestrator.sh\n- claudev status → вызывает bd stats + detect-phase.sh\n- claudev update → git pull в ~/.claudev/\n- claudev --version → cat ~/.claudev/VERSION","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-27T21:38:17.165591+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Объединено в одну задачу CLI","labels":["model:sonnet"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-3ls","title":"Написать промпт: Analyst-OPS","description":"Написать промпт Analyst-OPS\n\n**Файл:** core/agents/analyst-ops.md\n\n**Frontmatter:**\n```yaml\n---\nname: analyst-ops\ndescription: Проверяет операционные аспекты, добавляет задачи\nmodel: sonnet\n---\n```\n\n**Роль:** OPS аналитик. Проверяет deployment, monitoring, operations.\n\n**Критические правила:**\n- ТОЛЬКО добавлять задачи\n- Добавлять label: added-by:analyst-ops\n\n**Что проверять:**\n- Dockerfile / container setup?\n- Environment variables documented?\n- Health checks / readiness probes?\n- Logging setup?\n- Metrics / monitoring?\n- Backup strategy?\n- Secrets management?\n\n**Алгоритм:**\n1. Claim: bd update run-analyst-ops --claim\n2. Прочитать SPEC.md и план\n3. Найти OPS проблемы\n4. Для каждой:\n```bash\nbd create --title=\"OPS: \u003cпроблема\u003e\" --type=task --priority=2 --label=added-by:analyst-ops\n```\n5. bd close run-analyst-ops\n\n**done_when:**\n- [ ] Frontmatter с model: sonnet\n- [ ] Чеклист операционных аспектов\n- [ ] Формат задач с label\n- [ ] Логирование через log.sh","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-23T15:35:32.627703+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Промпты analysts созданы","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-3rb","title":"Fix Tech Writer: интерактивный режим для INIT","description":"P0: Tech Writer не может вести диалог в --print режиме. Нужно запускать интерактивно для фазы INIT.","status":"tombstone","priority":0,"issue_type":"bug","created_at":"2026-01-26T11:28:57.256746+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Fixed: run_interactive_agent() for INIT phase","deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"claudev-3u4","title":"Написать промпт: Analyst-UX","description":"Написать промпт Analyst-UX\n\n**Файл:** core/agents/analyst-ux.md\n\n**Frontmatter:**\n```yaml\n---\nname: analyst-ux\ndescription: Проверяет UX, добавляет задачи\nmodel: sonnet\n---\n```\n\n**Роль:** UX аналитик. Проверяет план на удобство для пользователя.\n\n**Критические правила:**\n- ТОЛЬКО добавлять задачи (не удалять, не менять существующие)\n- Добавлять label: added-by:analyst-ux\n- Security \u003e UX (не спорить с безопасностью)\n\n**Что проверять:**\n- Понятен ли UI/UX flow?\n- Есть ли error states?\n- Есть ли loading states?\n- Accessibility basics?\n- Mobile responsive?\n\n**Алгоритм:**\n1. Claim задачу-триггер: bd update run-analyst-ux --claim\n2. Прочитать SPEC.md и план (bd list)\n3. Найти UX проблемы\n4. Для каждой проблемы:\n```bash\nbd create --title=\"UX: \u003cпроблема\u003e\" --type=task --priority=3 --label=added-by:analyst-ux\n```\n5. bd close run-analyst-ux\n6. Логировать количество найденных проблем\n\n**done_when:**\n- [ ] Frontmatter с model: sonnet\n- [ ] Claim задачи-триггера\n- [ ] Чеклист что проверять\n- [ ] Формат создания задач с label\n- [ ] Close триггера в конце\n- [ ] Логирование через log.sh","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-23T15:35:32.406657+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Промпты analysts созданы","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-476","title":"Create run-senior-executor.sh","description":"ПРОБЛЕМА:\nrun-executors.sh помечает задачи `--label=needs-review`, но никто их не обрабатывает.\nФайл run-senior-executor.sh не существует.\n\nРЕШЕНИЕ:\nСоздать скрипт который:\n1. Находит задачи с label=needs-review\n2. Запускает Senior Executor агента для каждой (ПОСЛЕДОВАТЕЛЬНО)\n3. Senior Executor делает code review, merge, cleanup\n\nАналогично run-executors.sh но:\n- Работает последовательно (quality gate)\n- Один PR за раз\n- Проверяет gh доступность для PR workflow\n\nfiles: core/scripts/run-senior-executor.sh (новый)\ndone_when: задачи с needs-review обрабатываются и мержатся","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-26T10:55:53.472883+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Fixed in v0.4.1","deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-4e3","title":"Формат данных между ролями","notes":"Нужно определить: формат SPEC.md (есть набросок), формат задачи в beads для Executor","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-22T17:27:44.512524+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Решено: MVP scope через Tech Writer, формат задачи (title/files/done_when), все роли определены","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-4eq","title":"DESIGN: Что делать когда лимит эскалаций исчерпан","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-23T15:10:52.842314+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Решено: blocked:escalation-limit + полное описание в notes + зависимое дерево блокируется","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-4ln","title":"Implement phase dispatcher in orchestrator","description":"ПРОБЛЕМА:\nManager.md содержит bash команды (`./scripts/run-analysts.sh` и т.д.), но `claude --print` только ВЫВОДИТ текст. Никто эти команды не выполняет.\n\nРЕШЕНИЕ:\nOrchestrator должен сам запускать нужные скрипты по фазе:\n\n```bash\nphase=$(detect_phase)\ncase $phase in\n  INIT)           run_tech_writer ;;\n  PLANNING)       run_architect 'create_plan' ;;\n  HELPERS)        ./scripts/run-analysts.sh ;;\n  PLAN_REVIEW)    run_architect 'plan_review' ;;\n  IMPLEMENTATION) ./scripts/run-executors.sh \u0026\u0026 ./scripts/run-senior-executor.sh ;;\n  FINAL_REVIEW)   run_architect 'final_review' ;;\n  DONE)           handle_done ;;\nesac\n```\n\nManager.md становится advisory — даёт рекомендации, но не управляет execution.\nЛибо убираем Manager совсем — orchestrator сам определяет что делать.\n\nВАЖНО: Обсудить с пользователем какой подход выбрать:\n1. Manager как advisor (оставляем промпт, но не ждём исполнения)\n2. Убрать Manager, вся логика в bash\n\nfiles: core/scripts/orchestrator.sh\ndone_when: система проходит INIT → PLANNING автоматически","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-26T10:55:45.801971+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Fixed in v0.4.1","deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-4zm","title":"Написать промпт: Manager","description":"Переписать промпт Manager под новую архитектуру\n\n**Файл:** core/agents/manager.md\n\n**Frontmatter:**\n```yaml\n---\nname: manager\ndescription: Stateless координатор, определяет фазу по beads\nmodel: sonnet\n---\n```\n\n**Роль:** Единая точка координации. Stateless — всё состояние в beads.\n\n**Критические правила:**\n- НИКОГДА не хранить состояние в памяти\n- Определять фазу через ./scripts/detect-phase.sh\n- Создавать задачи-триггеры для фаз (run-analyst-*, run-plan-review, run-final-review)\n\n**Алгоритм по фазам:**\n\nINIT:\n- Запустить Tech Writer\n- Ждать SPEC.md\n\nPLANNING:\n- Запустить Architect для создания плана\n\nHELPERS:\n- Создать 5 задач-триггеров: run-analyst-ux, run-analyst-security, etc.\n- Запустить ./scripts/run-analysts.sh\n- Проверить: все 5 closed → переход в PLAN_REVIEW\n\nPLAN_REVIEW:\n- Создать run-plan-review\n- Запустить Architect для ревью\n- После closed → IMPLEMENTATION\n\nIMPLEMENTATION:\n- Запустить ./scripts/run-executors.sh\n- Проверять ready задачи\n- Когда все task closed → FINAL_REVIEW\n\nFINAL_REVIEW:\n- Создать run-final-review\n- Запустить Architect\n- После closed → DONE\n\nDONE:\n- Логировать завершение\n- Вывести PROJECT_COMPLETE\n\n**done_when:**\n- [ ] Frontmatter с model: sonnet\n- [ ] Stateless подход (всё через bd)\n- [ ] Все 7 фаз описаны\n- [ ] Создание задач-триггеров для фаз\n- [ ] Вызов скриптов (detect-phase, run-analysts, run-executors)\n- [ ] Логирование через log.sh","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:35:31.928638+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Промпты созданы","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-520","title":"[P1] senior-executor.md: Remove duplicate task search (already in context)","description":"files: core/agents/senior-executor.md\nproblem: Lines 24-29 search for needs-review task, but run-senior-executor.sh already passes TASK_ID in context\nfix: Remove step 1 (find task), start from step 2 using TASK_ID from context\nalso: Add TASK_TITLE extraction from passed TASK JSON\ndone_when: Prompt uses TASK_ID from context, no duplicate search","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2026-01-26T16:49:13.757272+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Removed duplicate task search, now uses TASK_ID from context","labels":["audit:prompt","model:sonnet"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"claudev-5a6","title":"Обновить docs/architecture.md под новую архитектуру","description":"Обновить документацию архитектуры\n\n**Файл:** docs/architecture.md\n\n**Содержимое:**\n1. Обзор системы (диаграмма агентов)\n2. Фазы проекта (INIT → DONE)\n3. Описание каждого агента (роль, модель, когда вызывается)\n4. Git workflow (branches, PR, merge)\n5. Beads интеграция (статусы, labels, dependencies)\n6. Конфигурация (config.yaml параметры)\n7. Логирование (формат, что логируется)\n8. Troubleshooting (частые проблемы)\n\n**Стиль:**\n- Для разработчиков, не для пользователей\n- Технические детали, не маркетинг\n- Примеры команд\n\n**done_when:**\n- [ ] Все 8 секций описаны\n- [ ] Актуально под новую архитектуру\n- [ ] Примеры команд работают","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-23T16:25:42.739732+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Документация полностью переписана под новую архитектуру","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-5a8","title":"[P3] tech-writer.md: Clarify 30min timeout handling","description":"files: core/agents/tech-writer.md\nproblem: Line 88 says 'If user doesn't respond for 30 minutes' but unclear who tracks this\nquestion: Is Tech Writer supposed to track time? Or is this orchestrator's responsibility?\ncurrent: orchestrator runs Tech Writer without timeout (interactive mode)\noptions:\n  1. Remove 30min mention (orchestrator doesn't enforce)\n  2. Add timeout to orchestrator for interactive mode\n  3. Clarify that it's a recommendation, not enforced\ndone_when: Documentation is clear about timeout responsibility","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-26T16:49:43.209484+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Clarified that 30min timeout is a recommendation, not enforced","labels":["audit:prompt","model:haiku"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-5kw","title":"[P2] detect-phase.sh: Add cycles check before IMPLEMENTATION","description":"files: core/scripts/detect-phase.sh\nproblem: PROJECT.md says Manager should check cycles before IMPLEMENTATION, but detect-phase.sh doesn't do this\nfix: Add check before returning IMPLEMENTATION phase:\n  if bd dep cycles 2\u003e\u00261 | grep -q cycle; then\n    echo 'BLOCKED_CYCLES'\n    exit 1\n  fi\ncontext: Architect already checks when adding deps, this is safety net\ndone_when: detect-phase.sh checks for cycles before IMPLEMENTATION","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T16:58:56.537289+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Added cycles check before returning IMPLEMENTATION phase","labels":["audit:script","model:sonnet"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-5n9","title":"Создать bin/claudev CLI","description":"Создать CLI wrapper в bin/claudev с командами:\n- claudev init — инициализация проекта\n- claudev start — запуск orchestrator\n- claudev status — статус проекта (bd stats, фаза)\n- claudev update — обновление глобального claudev\n\nclaudev init делает:\n1. Проверяет deps\n2. git init (если нет)\n3. bd init (если нет)\n4. Создаёт .claudev/config.sh\n5. Создаёт симлинки: .claude/agents, .claude/commands, scripts\n6. Настраивает .claude/settings.json\n7. Добавляет в .gitignore\n8. Запускает orchestrator\n\nfiles: bin/claudev\ndone_when: claudev init работает в чистом проекте","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-28T07:00:29.895775+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Создан bin/claudev с init/start/status/update","deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-5wy","title":"Обновить manager.md под новую архитектуру","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:06:59.162247+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Дубликаты: заменены на детальные задачи 'Написать промпт'","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-5xm","title":"EPIC: MCP Integration for universal development","description":"Integrate essential MCP servers to support web, mobile, desktop and IoT development","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-28T11:30:28.326004+03:00","created_by":"m","updated_at":"2026-01-28T11:30:28.326004+03:00"}
{"id":"claudev-675","title":"Удалить invite.sh (заменён install.sh)","description":"files: invite.sh\ndone_when: файл удалён, README обновлён\n\ninvite.sh больше не нужен — его функционал в новом install.sh","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-27T21:38:35.42884+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Удалён, заменён глобальным install.sh","labels":["model:haiku"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-76e","title":"Подтвердить: подход к merge conflicts","description":"Предложение: простой конфликт — Senior Executor сам, семантический — задача для Architect. Нужно подтверждение.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-23T11:26:05.316917+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Решено: см. PROJECT.md (23 января)","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-76w","title":"MCP server selector based on project type","description":"During init, detect or ask project type (web/mobile/desktop/IoT) and offer relevant MCP servers: Web→Vercel/Netlify, Mobile→Mobile-MCP/Flutter/Expo, Desktop→Tauri, Database→MongoDB if needed","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T11:30:37.767396+03:00","created_by":"m","updated_at":"2026-01-28T11:39:46.654417+03:00","closed_at":"2026-01-28T11:39:46.654417+03:00","close_reason":"Simplified: only 4 core MCP servers needed (GitHub, PostgreSQL, Supabase, Playwright)","dependencies":[{"issue_id":"claudev-76w","depends_on_id":"claudev-zp8","type":"blocks","created_at":"2026-01-28T11:30:42.20156+03:00","created_by":"m"},{"issue_id":"claudev-76w","depends_on_id":"claudev-5xm","type":"blocks","created_at":"2026-01-28T11:30:42.325131+03:00","created_by":"m"}]}
{"id":"claudev-7e3","title":"Поддержка существующих проектов при init","description":"При claudev init в проекте с кодом:\n1. Определить что проект не пустой\n2. Проанализировать кодовую базу\n3. Сформировать контекст для Tech Writer\n4. Tech Writer задаёт релевантные вопросы\n\nСценарии после init:\n- Пустой проект → Tech Writer: 'что хотите создать?'\n- Есть SPEC.md → сразу Architect\n- Есть код → анализ → Tech Writer: 'вижу X, что хотите добавить?'","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2026-01-27T21:47:07.767135+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Feature implemented: project type detection + analyze-project.sh","deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"claudev-7ni","title":"DESIGN: Атомарный claim задачи (race condition)","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-23T15:10:52.722763+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Beads уже поддерживает --claim (атомарный)","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-8b1","title":"Написать промпт: Analyst-Architecture","description":"Написать промпт Analyst-Architecture\n\n**Файл:** core/agents/analyst-architecture.md\n\n**Frontmatter:**\n```yaml\n---\nname: analyst-architecture\ndescription: Проверяет архитектуру, добавляет задачи\nmodel: sonnet\n---\n```\n\n**Роль:** Architecture аналитик. Проверяет структуру и паттерны.\n\n**Критические правила:**\n- ТОЛЬКО добавлять задачи\n- Добавлять label: added-by:analyst-architecture\n- НЕ дублировать работу главного Architect\n\n**Что проверять:**\n- Separation of concerns?\n- Single responsibility?\n- Dependency direction (внутрь)?\n- Coupling между модулями?\n- Naming conventions?\n- File structure consistency?\n- Code duplication risks?\n\n**Алгоритм:**\n1. Claim: bd update run-analyst-architecture --claim\n2. Прочитать SPEC.md и план\n3. Найти архитектурные проблемы\n4. Для каждой:\n```bash\nbd create --title=\"Architecture: \u003cпроблема\u003e\" --type=task --priority=2 --label=added-by:analyst-architecture\n```\n5. bd close run-analyst-architecture\n\n**done_when:**\n- [ ] Frontmatter с model: sonnet\n- [ ] Чеклист архитектурных аспектов\n- [ ] Формат задач с label\n- [ ] Логирование через log.sh","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-23T15:35:32.847592+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Промпты analysts созданы","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-8fj","title":"Manager и оркестрация","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-22T17:27:44.838454+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Обсудили: Manager = Sonnet, stateless, определяет фазу по beads","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-95v","title":"Создать tech-writer.md агента","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:06:58.814443+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Дубликаты: заменены на детальные задачи 'Написать промпт'","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-9dt","title":"v0.5: Исправление критических багов из аудита","description":"Найдено 4 P0 бага при архитектурном аудите v0.4:\n1. Heredoc синтаксис сломан в orchestrator.sh и run-executors.sh\n2. Manager промпт не исполняется — нужен dispatcher\n3. run-senior-executor.sh не существует\n4. Backpressure фильтр слишком широкий","status":"tombstone","priority":0,"issue_type":"epic","created_at":"2026-01-26T10:53:26.803343+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"All bugfixes completed in v0.4.1","deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"claudev-9j0","title":"Обновить orchestrator.sh под новые фазы и роли","description":"Переписать orchestrator под новую архитектуру\n\n**Файл:** core/scripts/orchestrator.sh\n\n**Новая логика:**\n\n1. **Lock file (single instance):**\n```bash\nLOCK_FILE=\".claudev/orchestrator.lock\"\nif [ -f \"$LOCK_FILE\" ]; then\n    OLD_PID=$(cat \"$LOCK_FILE\")\n    if kill -0 \"$OLD_PID\" 2\u003e/dev/null; then\n        echo \"Already running (PID $OLD_PID)\"; exit 1\n    else\n        rm -f \"$LOCK_FILE\"  # stale lock\n    fi\nfi\necho $$ \u003e \"$LOCK_FILE\"\ntrap \"rm -f $LOCK_FILE\" EXIT\n```\n\n2. **Beads daemon check:**\n```bash\nbd sync --status || { log \"ORCHESTRATOR\" \"FATAL\" \"Beads daemon not running\"; exit 1; }\n```\n\n3. **Frontmatter parsing (модель агента):**\n```bash\nget_model() {\n    local agent_file=$1\n    grep \"^model:\" \"$agent_file\" | cut -d: -f2 | tr -d ' '\n}\n```\n\n4. **Timeout enforcement:**\n```bash\ntimeout 10m claude --model \"$MODEL\" -p \"...\"\n```\n\n5. **Мониторинг каждые 2h:**\n```bash\n# Логировать: \"Iteration running for Xh, Y tasks remaining\"\n```\n\n6. **Вызов detect-phase.sh** вместо логики в промпте\n\n7. **Использовать log.sh** вместо локальной функции log()\n\n**done_when:**\n- [ ] Lock file mechanism работает\n- [ ] Beads daemon проверяется при старте и каждые 10 циклов\n- [ ] Модель агента читается из frontmatter\n- [ ] Timeout 10m для каждого вызова claude\n- [ ] Использует ./scripts/detect-phase.sh\n- [ ] Использует source ./scripts/log.sh\n- [ ] Логирует через log \"ORCHESTRATOR\" \"EVENT\" \"message\"","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:22:49.334544+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"orchestrator.sh полностью переписан с lock file, config validation, graceful shutdown","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-9mw","title":"Fix backpressure filter in run-executors.sh","description":"ПРОБЛЕМА:\nФильтр `test(\"^(executor|model:)\")` слишком широкий.\nlabel `model:*` есть на ВСЕХ задачах от Architect.\nЭто может посчитать не только активных executors.\n\nРЕШЕНИЕ:\nСчитать только по label `executor`:\n```bash\njq '[.[] | select(.labels[]? == \"executor\")] | length'\n```\n\nfiles: core/scripts/run-executors.sh\ndone_when: backpressure считает только реально работающих executors","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-26T10:56:00.328935+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Fixed in v0.4.1","deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-a28","title":"Обновить run-helpers.sh → run-analysts.sh","description":"Переименовать и обновить скрипт запуска аналитиков\n\n**Файл:** core/scripts/run-analysts.sh (был run-helpers.sh)\n\n**Логика:**\n1. Получает список из 5 analysts: ux, security, ops, reliability, architecture\n2. Для каждого запускает в background:\n```bash\ntimeout 10m claude --model sonnet -p \"Следуй .claude/agents/analyst-$NAME.md\" \u0026\n```\n3. Ждёт завершения всех (wait)\n4. Не проверяет результат — это делает Manager через bd\n\n**Важно:**\n- НЕ создаёт задачи-триггеры (это делает Manager)\n- Просто запускает 5 процессов параллельно\n- Использует source ./scripts/log.sh для логирования\n\n**done_when:**\n- [ ] Файл переименован в run-analysts.sh\n- [ ] Запускает 5 analysts параллельно\n- [ ] Timeout 10m на каждого\n- [ ] Модель sonnet для всех\n- [ ] Логирует старт/финиш каждого","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:22:49.105242+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Реализовано: run-analysts.sh","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-aak","title":"Роли и ответственности","notes":"Частично обсуждено: Tech Writer, Manager. Осталось: Architect, Analysts, Executors, Senior roles","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-22T17:27:44.418493+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Решено: MVP scope через Tech Writer, формат задачи (title/files/done_when), все роли определены","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-acs","title":"Backpressure: считать через beads вместо gh pr list","description":"**Проблема:** Решение #16 использует `gh pr list` для подсчёта открытых PR. Если нет gh CLI (fallback к local merge) → OPEN_PRS=0 → лимит не работает → executors плодятся без ограничений\n\n**Решение:** Backpressure через in_progress tasks в beads (работает всегда)\n\n```bash\n# run-executors.sh перед запуском новых:\nACTIVE_EXECUTORS=$(bd list --status=in_progress --format=json | jq '[.[] | select(.assignee==\"executor\")] | length')\n\nif [ \"$ACTIVE_EXECUTORS\" -ge \"$MAX_PARALLEL_EXECUTORS\" ]; then\n    log \"INFO\" \"Executor queue full ($ACTIVE_EXECUTORS/$MAX_PARALLEL_EXECUTORS), waiting\"\n    exit 0\nfi\n\n# Иначе запускаем новых executors\n```\n\n**done_when:**\n- [ ] run-executors.sh считает через bd list (не gh)\n- [ ] Лимит работает независимо от GitHub\n- [ ] Логирует когда очередь полная","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-24T16:32:09.197063+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Реализовано: run-executors.sh с backpressure через bd list (не gh pr list)","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-ava","title":"Обновить install.sh (pre-commit hook, config.yaml, logs/archive, stats)","description":"Обновить установщик для целевого проекта\n\n**Файл:** install.sh\n\n**Что добавить:**\n\n1. **Pre-commit hook (gitleaks):**\n```bash\n# Проверить что gitleaks установлен\nif ! command -v gitleaks \u0026\u003e /dev/null; then\n    echo \"Warning: gitleaks not found. Install for secret scanning.\"\nfi\n# Добавить hook в .git/hooks/pre-commit\n```\n\n2. **Создание структуры:**\n```bash\nmkdir -p .claudev logs/archive stats\ncp templates/config.template.yaml .claudev/config.yaml\n```\n\n3. **Edge cases:**\n- Если .claude/ существует — спросить: merge или skip?\n- Если scripts/ существует — спросить: overwrite или skip?\n- Если .claudev/ существует — это переустановка, спросить подтверждение\n\n4. **Симлинки:**\n```bash\nln -sf .claudev/core/agents .claude/agents\nln -sf .claudev/core/commands .claude/commands\nln -sf .claudev/core/scripts scripts\n```\n\n5. **Права на скрипты:**\n```bash\nchmod +x scripts/*.sh\n```\n\n**done_when:**\n- [ ] Pre-commit hook добавляется (с warning если нет gitleaks)\n- [ ] Создаётся .claudev/config.yaml из шаблона\n- [ ] Создаётся logs/archive и stats\n- [ ] Обрабатывает существующие директории (спрашивает)\n- [ ] Симлинки создаются корректно\n- [ ] Скрипты executable","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:22:49.693185+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Реализовано: dependency check, config.sh, logs/archive, stats, pre-commit hook, .gitignore","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-avb","title":"v0.7: Поддержка существующих проектов","description":"Улучшенная инициализация для проектов с существующим кодом:\n- Анализ кодовой базы\n- Контекст для Tech Writer\n- Релевантные вопросы на основе существующего кода\n\nПеренесено из v0.6 для упрощения скоупа.","status":"tombstone","priority":2,"issue_type":"epic","created_at":"2026-01-28T07:00:12.380229+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"v0.7 complete: existing project support + delete command","deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"claudev-b01","title":"[P2] executor.md: Consider simplified version for Haiku","description":"files: core/agents/executor.md\nproblem: Current executor.md has 8 steps with rebase/conflict handling - too complex for Haiku\noption 1: Create executor-haiku.md with simplified flow (no rebase, just commit+push)\noption 2: Add conditional section 'If model:haiku - skip rebase, Senior will handle'\noption 3: Leave as-is, rely on retry if Haiku fails\ndone_when: Decision made and documented (or implemented)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T16:49:33.543827+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Added conditional note for Haiku: skip rebase if complex, Senior will handle","labels":["audit:prompt","model:opus"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-bm9","title":"Add invite script for one-liner installation","status":"tombstone","priority":2,"issue_type":"feature","created_at":"2026-01-24T17:38:06.656018+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Создан invite script для one-liner установки","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"claudev-bz7","title":"Написать промпт: Senior Executor","description":"Написать промпт Senior Executor (ревью и merge)\n\n**Файл:** core/agents/senior-executor.md\n\n**Frontmatter:**\n```yaml\n---\nname: senior-executor\ndescription: Последовательно валидирует код, мержит в main\nmodel: opus\n---\n```\n\n**Роль:** Quality gate. Проверяет код, мержит через PR. Работает последовательно.\n\n**Критические правила:**\n- ПОСЛЕДОВАТЕЛЬНО (один PR за раз)\n- Мержить по приоритету (P0 первым)\n- Pull перед каждым merge\n- НИКОГДА не пропускать secrets в код\n\n**Алгоритм:**\n1. Найти задачу с label needs-review: bd list --label=needs-review | head -1\n2. Если нет — завершиться\n3. Создать PR:\n```bash\ngh pr create --base main --head task/\u003ctask_id\u003e --title \"\u003ctitle\u003e\" --body \"Closes \u003ctask_id\u003e\"\n```\n4. Проверить код:\n   - Соответствует done_when?\n   - Нет secrets (паттерны: sk-, api_key=, password=)\n   - Тесты проходят (если есть)\n5. Если код плохой:\n   - Убрать label: bd update \u003ctask_id\u003e --remove-label=needs-review\n   - Добавить в notes причину\n   - НЕ закрывать задачу (Executor получит снова)\n   - Завершиться\n6. Если код ок:\n```bash\ngh pr merge --squash\ngit push origin --delete task/\u003ctask_id\u003e\n```\n7. Если CI настроен — ждать: gh run watch\n8. Если CI failed:\n```bash\ngit revert HEAD\ngit push\nbd update \u003ctask_id\u003e --status=open --notes=\"CI failed: \u003cerror\u003e\"\n```\n9. Если всё ок — bd close \u003ctask_id\u003e\n\n**Merge conflicts:**\n- Простой (разные файлы) — решить сам\n- Семантический — создать задачу для Architect, отложить merge\n\n**done_when:**\n- [ ] Frontmatter с model: opus\n- [ ] Последовательная обработка (один за раз)\n- [ ] PR workflow через gh\n- [ ] Проверка на secrets (паттерны в diff)\n- [ ] Возврат плохого кода (убрать label, добавить notes)\n- [ ] CI handling (wait, revert on fail)\n- [ ] Merge conflict handling\n- [ ] Логирование через log.sh","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:35:32.288674+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Промпты созданы","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-ccu","title":"Обновить tech-writer.md для работы с существующими проектами","description":"files: core/agents/tech-writer.md\ndone_when: Tech Writer читает PROJECT_CONTEXT.md и адаптирует диалог\n\nИзменения в промпте:\n\n### 1. Проверь контекст проекта\n```bash\nif [ -f PROJECT_CONTEXT.md ]; then\n    cat PROJECT_CONTEXT.md\n    # Это существующий проект\nfi\n```\n\n### 2. Адаптируй вопросы\n\nДля существующего проекта:\n- 'Вижу это [стек] приложение для [описание из README]'\n- 'Что хотите добавить или изменить?'\n- 'Есть ли конкретная проблема которую нужно решить?'\n\nДля пустого проекта:\n- 'Расскажите, что вы хотите создать?'\n\n### 3. При финализации\n- Удалить PROJECT_CONTEXT.md (временный файл)\n- Или включить контекст в SPEC.md","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-27T21:47:35.882989+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Updated tech-writer.md for existing projects","labels":["model:sonnet"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-cf9","title":"Документировать: детали фазы PLAN_REVIEW","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:22:50.026547+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Решение: label added-by:analyst-*, задача-триггер run-plan-review","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-cr1","title":"Границы итераций и MVP","notes":"Частично: итерации через секции в SPEC.md. Осталось: кто определяет MVP scope","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-22T17:27:44.605411+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Решено: MVP scope через Tech Writer, формат задачи (title/files/done_when), все роли определены","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-czh","title":"Config validation: проверять корректность значений после source","description":"**Проблема:** source config.sh без валидации → опечатка user (MAX_PARALLEL_EXECUTORS=abc) → bash операции падают с ошибкой\n\n**Решение:**\n```bash\nsource .claudev/config.sh\n\n# Validate critical values\nvalidate_int() {\n  local name=$1 value=$2\n  if ! [[ \"$value\" =~ ^[0-9]+$ ]]; then\n    log \"FATAL\" \"Invalid $name in config.sh (must be integer, got: $value)\"\n    exit 1\n  fi\n}\n\nvalidate_int \"MAX_PARALLEL_EXECUTORS\" \"$MAX_PARALLEL_EXECUTORS\"\nvalidate_int \"RETRY_LIMIT\" \"$RETRY_LIMIT\"\nvalidate_int \"CLEANUP_KEEP_DAYS\" \"$CLEANUP_KEEP_DAYS\"\n\n# Validate booleans\nif [[ \"$CI_ENABLED\" != \"true\" \u0026\u0026 \"$CI_ENABLED\" != \"false\" ]]; then\n  log \"FATAL\" \"Invalid CI_ENABLED (must be true/false)\"\n  exit 1\nfi\n```\n\n**done_when:**\n- [ ] orchestrator.sh валидирует config после source\n- [ ] Невалидный config → FATAL error + exit 1\n- [ ] Проверяются: integers, booleans, timeouts","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-24T16:20:48.896789+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Реализовано: config.template.sh + validate_config() в orchestrator.sh","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-d3d","title":"[P3] run-executors.sh: Remove executor label after task close","description":"files: core/scripts/run-executors.sh, core/scripts/run-senior-executor.sh\nproblem: executor label is added at claim but never removed after close\nfix: Either remove in run-senior-executor.sh after close, or don't add it at all (use in_progress status instead)\ndone_when: No orphaned executor labels on closed tasks","status":"tombstone","priority":3,"issue_type":"task","created_at":"2026-01-26T16:58:56.377522+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Added --remove-label=executor on timeout and error in run-executors.sh","labels":["audit:script","model:haiku"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-djq","title":"claudev CLI с командами init/start/status","description":"CLI команды:\n\nclaudev install     # Глобальная установка (из curl | bash)\nclaudev init        # Инициализация проекта + запуск orchestrator\nclaudev start       # Запуск orchestrator (если уже init)\nclaudev status      # Статус проекта (bd stats, фаза)\nclaudev update      # Обновление глобального claudev\n\nclaudev init делает:\n1. Проверяет что deps установлены\n2. git init (если нет)\n3. bd init (если нет)\n4. Создаёт .claudev/config.sh\n5. Создаёт симлинки .claude/agents, .claude/commands, scripts\n6. Настраивает .claude/settings.json (permissions)\n7. Добавляет в .gitignore\n8. Запускает orchestrator\n\nРеализация: bash скрипт с case для команд","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2026-01-27T21:37:57.670456+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Не задача / дубликат - объединено","deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"claudev-e2a","title":"label-test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T16:31:10.0109+03:00","created_by":"m","updated_at":"2026-01-26T16:31:30.125692+03:00","labels":["test2","test3"],"deleted_at":"2026-01-26T16:31:30.125692+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-f7o","title":"test","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T16:28:55.9224+03:00","created_by":"m","updated_at":"2026-01-26T16:29:12.012606+03:00","labels":["test:123"],"deleted_at":"2026-01-26T16:29:12.012606+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-g9z","title":"v0.6: Global install + claudev init architecture","description":"Переход на новую архитектуру:\n1. install.sh → глобальная установка в $HOME/.claudev/\n2. claudev CLI → команда init для проектов\n3. claudev init → сразу запускает orchestrator\n\nТекущее:\n- invite.sh клонирует в .claudev/ проекта\n- install.sh настраивает проект\n\nНовое:\n- install.sh устанавливает claudev глобально\n- claudev init — инициализирует любой проект\n- claudev start — запускает orchestrator","status":"tombstone","priority":1,"issue_type":"epic","created_at":"2026-01-27T21:37:36.845618+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"v0.6 complete: global install + claudev CLI","deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"claudev-h03","title":"Manager cycles check: создавать P0 задачу при обнаружении","description":"**Проблема:** PROJECT.md: \"Manager перепроверяет перед переходом в IMPLEMENTATION (safety net)\". Но что делать если cycles найдены? Падать? Зависать?\n\n**Решение:** Manager при cycles → P0 задача для Architect, остаётся в PLAN_REVIEW\n\n```bash\n# Manager при переходе в IMPLEMENTATION:\nif bd dep cycles 2\u003e\u00261 | grep -q \"cycle\"; then\n    log \"ERROR\" \"Circular dependencies detected before IMPLEMENTATION\"\n    \n    # Создаём P0 для Architect\n    bd create --title=\"Fix circular dependencies in task graph\" \\\n        --type=task --priority=0 --assignee=architect \\\n        --notes=\"Cycles detected by Manager safety check. Output: $(bd dep cycles)\"\n    \n    # Остаёмся в PLAN_REVIEW (не переходим дальше)\n    exit 0\nfi\n\n# Cycles нет → переход в IMPLEMENTATION\n```\n\n**done_when:**\n- [ ] Manager проверяет cycles перед IMPLEMENTATION\n- [ ] При cycles → P0 task для Architect\n- [ ] Manager не переходит в IMPLEMENTATION пока cycles есть\n- [ ] Логирует обнаружение","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-24T16:32:17.499901+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Реализовано в Manager промпте: проверяет bd dep cycles и создаёт P0 при обнаружении","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-h6h","title":"Добавить команду claudev delete","description":"Команда для корректного удаления claudev из проекта.\n\nУдаляет:\n- .claudev/ (config.sh, lock)\n- .claude/agents (симлинк)\n- .claude/commands (симлинк)\n- .claude/settings.json\n- scripts/ (симлинк)\n- logs/\n- stats/\n\nНЕ трогает:\n- .beads/\n- .git/\n- SPEC.md\n- код проекта\n\nПоведение:\n- Проверяет что это claudev проект (.claudev/ существует)\n- Спрашивает подтверждение (y/N)\n- Выводит что удалено","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-28T08:04:24.99363+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Implemented in v0.7","labels":["model:haiku","v0.7"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-h9q","title":"v0.7.3: Onboarding improvements","description":"Улучшение onboarding для непрограммистов в claudev init.\n\nGoals:\n- Автоматический запуск beads daemon\n- Проводка через GitHub setup (авторизация, создание repo)\n- Умные рекомендации по безопасности (gitleaks только при GitHub)\n\ndone_when: claudev init полностью self-contained, не требует предварительных настроек","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-28T09:37:20.115677+03:00","created_by":"m","updated_at":"2026-01-28T10:05:01.694424+03:00","closed_at":"2026-01-28T10:05:01.694424+03:00","close_reason":"All children completed"}
{"id":"claudev-hkb","title":"Удалить устаревшие файлы агентов (helper-*, coder.md, reviewer.md, analyst.md)","description":"Удалить устаревшие файлы агентов после создания новых\n\n**Удалить из core/agents/:**\n- helper-architecture.md\n- helper-ops.md\n- helper-reliability.md\n- helper-ux.md\n- coder.md\n- reviewer.md\n- analyst.md\n\n**Оставить (будут переписаны):**\n- manager.md\n- architect.md\n\n**Важно:** Выполнять ПОСЛЕ того как все новые промпты написаны (зависимости в beads)\n\n**done_when:**\n- [ ] Все 7 устаревших файлов удалены\n- [ ] git rm для удаления из индекса\n- [ ] Новые файлы на месте (analyst-*.md, executor.md, senior-executor.md, tech-writer.md)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:06:59.03615+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Удалены устаревшие файлы, созданы новые analyst-*.md","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-hm0","title":"Создать init-project.sh","description":"files: core/scripts/init-project.sh (новый)\ndone_when: скрипт инициализирует проект и запускает orchestrator\n\nЛогика (из текущего install.sh):\n1. Проверяет deps (bd, claude, gh, jq)\n2. git init если нужно\n3. bd init если нужно\n4. Копирует config.template.sh → .claudev/config.sh\n5. Создаёт симлинки:\n   - .claude/agents → ~/.claudev/core/agents\n   - .claude/commands → ~/.claudev/core/commands\n   - scripts → ~/.claudev/core/scripts\n6. Создаёт .claude/settings.json (permissions)\n7. Обновляет .gitignore\n8. mkdir logs/ stats/\n9. Запускает orchestrator.sh","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-27T21:38:25.009534+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Объединено в одну задачу CLI","labels":["model:sonnet"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-j8a","title":"[P2] All agents: Add explicit context variables reminder","description":"files: core/agents/executor.md, core/agents/senior-executor.md, core/agents/analyst-*.md\nproblem: Agents receive context variables (TASK_ID, TRIGGER_TASK, PROJECT_ROOT) but prompts don't explicitly remind to use them\nfix: Add section after КРИТИЧЕСКИЕ ПРАВИЛА:\n  ## Контекст (используй эти переменные)\n  - TASK_ID: ID задачи из контекста\n  - TASK: JSON задачи из контекста\n  - PROJECT_ROOT: корень проекта\ndone_when: All agent prompts have explicit context section","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-26T16:49:33.419818+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Added context variables section to executor, senior-executor, and all 5 analysts","labels":["audit:prompt","model:sonnet"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-jdy","title":"Research: MCP server installation automation","description":"Research how to auto-configure MCP servers in Claude Code settings. Check: 1) Where settings.json stores MCP config 2) Required npm packages 3) Auth requirements (GitHub, Supabase tokens)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-28T11:30:37.887122+03:00","created_by":"m","updated_at":"2026-01-28T11:43:08.225285+03:00","closed_at":"2026-01-28T11:43:08.225285+03:00","close_reason":"Research complete: MCP config via .mcp.json or claude mcp add CLI"}
{"id":"claudev-jtk","title":"Подтвердить: rollback при падении CI","description":"Предложение: git revert + возврат задачи в open с ошибкой. Нужно подтверждение.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-23T11:26:05.430551+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Решено: см. PROJECT.md (23 января)","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-kre","title":"Обновить architect.md под новые решения","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:06:59.274273+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Дубликаты: заменены на детальные задачи 'Написать промпт'","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-lni","title":"Написать промпт: Analyst-Reliability","description":"Написать промпт Analyst-Reliability\n\n**Файл:** core/agents/analyst-reliability.md\n\n**Frontmatter:**\n```yaml\n---\nname: analyst-reliability\ndescription: Проверяет надёжность, edge cases, добавляет задачи\nmodel: sonnet\n---\n```\n\n**Роль:** Reliability аналитик. Проверяет edge cases, error handling.\n\n**Критические правила:**\n- ТОЛЬКО добавлять задачи\n- Добавлять label: added-by:analyst-reliability\n\n**Что проверять:**\n- Error handling для всех операций?\n- Retry logic для сетевых вызовов?\n- Timeout handling?\n- Graceful degradation?\n- Data validation?\n- Race conditions?\n- Resource cleanup?\n\n**Алгоритм:**\n1. Claim: bd update run-analyst-reliability --claim\n2. Прочитать SPEC.md и план\n3. Найти reliability проблемы\n4. Для каждой:\n```bash\nbd create --title=\"Reliability: \u003cпроблема\u003e\" --type=task --priority=2 --label=added-by:analyst-reliability\n```\n5. bd close run-analyst-reliability\n\n**done_when:**\n- [ ] Frontmatter с model: sonnet\n- [ ] Чеклист reliability аспектов\n- [ ] Формат задач с label\n- [ ] Логирование через log.sh","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-23T15:35:32.737413+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Промпты analysts созданы","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-m75","title":"Проектирование системы Claudev","description":"EPIC: Редизайн системы под новые требования","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2026-01-22T17:27:38.585898+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Проектирование завершено, все решения задокументированы в PROJECT.md","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"claudev-m7t","title":"[P1] executor.md: Add TASK_TITLE extraction before use","description":"files: core/agents/executor.md\nproblem: Line 68-73 uses $TASK_TITLE but it's never extracted from task JSON\nfix: Add extraction step after bd show:\n  TASK_TITLE=$(bd show $TASK_ID --format=json | jq -r '.title')\ndone_when: TASK_TITLE is defined before use in escalation command","status":"tombstone","priority":1,"issue_type":"bug","created_at":"2026-01-26T16:49:13.50547+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Added TASK_TITLE extraction after bd show in step 1","labels":["audit:prompt","model:sonnet"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"bug"}
{"id":"claudev-naw","title":"Обновить detect-phase.sh под новые фазы","description":"Обновить скрипт определения фазы проекта\n\n**Файл:** core/scripts/detect-phase.sh\n\n**Фазы (в порядке проверки):**\n1. INIT — нет SPEC.md\n2. PLANNING — есть SPEC.md, нет задач с type=task\n3. HELPERS — есть задачи, но run-analyst-* не все closed\n4. PLAN_REVIEW — analysts done, run-plan-review не closed\n5. IMPLEMENTATION — есть open задачи type=task\n6. FINAL_REVIEW — все task closed, run-final-review не closed\n7. DONE — всё closed\n\n**Логика определения:**\n```bash\n# Проверки через bd list с фильтрами\n# Возвращает одно слово: INIT|PLANNING|HELPERS|...\n```\n\n**Вывод:** только название фазы (одно слово), без лишнего текста\n\n**done_when:**\n- [ ] Скрипт возвращает одну из 7 фаз\n- [ ] Использует bd list для проверки состояния\n- [ ] Проверяет наличие SPEC.md для INIT\n- [ ] Проверяет задачи-триггеры (run-analyst-*, run-plan-review, run-final-review)\n- [ ] Выход 0, вывод только название фазы","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:22:49.467454+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Обновлено: новые фазы, SPEC.md проверка, analysts вместо helpers","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-ovr","title":"Исправить beads tap в install.sh","description":"files: install.sh\ndone_when: beads устанавливается через правильный tap\n\nТекущее (неправильно):\n  install_with_brew \"beads\" \"bd\"\n\nПравильно:\n  brew tap steveyegge/beads\n  brew install bd","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-27T21:38:35.677454+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Исправил macOS (brew tap + brew install bd) и Linux (brew tap или go install)","labels":["model:haiku"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-pav","title":"Опционально: глубокий анализ проекта через Claude","description":"files: core/scripts/deep-analyze.sh (новый), core/agents/analyzer.md (новый)\ndone_when: для сложных проектов Claude анализирует код и создаёт детальный контекст\n\nКогда нужен глубокий анализ:\n- Проект большой (\u003e50 файлов кода)\n- Нет README или он неинформативный\n- Пользователь явно попросил\n\nЧто делает analyzer агент:\n- Читает ключевые файлы (entry points, main modules)\n- Понимает архитектуру (MVC, микросервисы, монолит)\n- Определяет домен (e-commerce, CRM, API, etc.)\n- Находит TODO/FIXME в коде\n- Создаёт PROJECT_CONTEXT.md с глубоким пониманием\n\nЭто опционально для v0.6, можно отложить на v0.7","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-27T21:47:46.894105+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Created deep-analyze.sh + analyzer.md","labels":["model:opus"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-q5a","title":"Написать промпт: Executor","description":"Написать промпт Executor (реализация задач)\n\n**Файл:** core/agents/executor.md\n\n**Frontmatter:**\n```yaml\n---\nname: executor\ndescription: Реализует ОДНУ задачу, работает в своей git ветке\nmodel: sonnet\n---\n```\n\n**Роль:** Исполнитель. Берёт одну задачу, реализует, коммитит.\n\n**Критические правила:**\n- ОДНА задача за запуск\n- Сначала claim через bd update \u003cid\u003e --claim\n- Работать в ветке task/beads-xxx\n- НИКОГДА не читать .env, не логировать secrets\n- Один коммит в конце\n\n**Алгоритм:**\n1. Получить task_id из промпта\n2. Прочитать задачу: bd show \u003ctask_id\u003e\n3. Claim: bd update \u003ctask_id\u003e --claim\n   - Если failed (уже занято) — завершиться без ошибки\n4. Создать ветку:\n```bash\ngit fetch origin\ngit branch -D task/\u003ctask_id\u003e 2\u003e/dev/null\ngit checkout -b task/\u003ctask_id\u003e origin/main\n```\n5. Реализовать по done_when из задачи\n6. Коммит:\n```bash\ngit add \u003cfiles\u003e\ngit commit -m \"feat: \u003ctitle\u003e (closes \u003ctask_id\u003e)\"\n```\n7. Push:\n```bash\ngit fetch origin main\ngit rebase origin/main\ngit push --force-with-lease -u origin task/\u003ctask_id\u003e\n```\n8. Добавить label needs-review:\n```bash\nbd update \u003ctask_id\u003e --label=needs-review\n```\n9. Логировать TASK_DONE\n\n**При ошибке git/gh:**\n- Логировать ERROR\n- НЕ менять статус задачи\n- Завершиться (Manager перезапустит)\n\n**done_when:**\n- [ ] Frontmatter с model: sonnet (default, может быть переопределён)\n- [ ] Атомарный claim через bd update --claim\n- [ ] Git workflow: fetch, branch, rebase, push --force-with-lease\n- [ ] Один коммит с сообщением по формату\n- [ ] Добавление label needs-review после push\n- [ ] Идемпотентность (повторный запуск безопасен)\n- [ ] Логирование через log.sh","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:35:32.170915+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Промпты созданы","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-qgo","title":"Обновить templates/ под новую архитектуру","description":"Обновить templates/ под новую архитектуру\n\n**Файлы:**\n- templates/SPEC.template.md — НЕ шаблон для заполнения, а пример структуры\n- templates/CLAUDE.template.md — инструкции для целевого проекта\n\n**SPEC.template.md:**\nПоказать пример готового SPEC.md, не шаблон с [ЗАПОЛНИТЬ]:\n```markdown\n# Project Specification\n\n## Что это\nКраткое описание продукта...\n\n## Для кого\nЦелевая аудитория...\n\n## MVP (первый релиз)\n- Feature 1\n- Feature 2\n\n## Технические детали\nСтек, ограничения, интеграции...\n```\n\n**CLAUDE.template.md:**\nИнструкции для агентов в целевом проекте:\n- Где искать SPEC.md\n- Как использовать beads\n- Правила работы с git\n- Security правила (не читать .env)\n\n**done_when:**\n- [ ] SPEC.template.md — пример, не шаблон\n- [ ] CLAUDE.template.md — инструкции для агентов\n- [ ] Оба файла актуальны под новую архитектуру","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-23T15:22:49.803606+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Обновлены: SPEC.template.md, CLAUDE.template.md под новую архитектуру","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-qm3","title":"Fix heredoc syntax in run-executors.sh","description":"ПРОБЛЕМА:\nСтрока 78-101: тот же паттерн — error handler `|| { ... }` между \u003c\u003cEOF и телом heredoc\n\nРЕШЕНИЕ:\nПереструктурировать так чтобы heredoc был внутри command substitution корректно.\n\nfiles: core/scripts/run-executors.sh\ndone_when: bash -n run-executors.sh passes","status":"tombstone","priority":0,"issue_type":"task","created_at":"2026-01-26T10:53:45.562204+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Fixed in v0.4.1","deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-qru","title":"Создать log.sh хелпер для логирования","description":"Создать хелпер для логирования в logs/claudev.log\n\n**Файл:** core/scripts/log.sh\n\n**Реализация:**\n```bash\n#!/bin/bash\nlog() {\n    local agent=$1 event=$2 message=$3\n    echo \"$(date '+%Y-%m-%d %H:%M:%S') [$agent] $event: $message\" \u003e\u003e logs/claudev.log\n}\n```\n\n**Формат вывода:**\n```\n2026-01-23 15:30:45 [MANAGER] PHASE: IMPLEMENTATION\n2026-01-23 15:30:46 [EXECUTOR] TASK_START: claudev-abc \"Добавить кнопку\"\n2026-01-23 15:35:12 [EXECUTOR] ERROR: git push failed\n```\n\n**События для логирования:**\n- PHASE — переходы между фазами\n- TASK_START, TASK_DONE, TASK_RETURNED — работа с задачами\n- ERROR — ошибки с контекстом\n- DECISION — решения агентов\n- INFO — информационные сообщения\n\n**done_when:**\n- [ ] Файл core/scripts/log.sh создан и executable\n- [ ] Функция log() принимает 3 параметра: agent, event, message\n- [ ] Append в logs/claudev.log (создаёт если нет)\n- [ ] Формат: \"YYYY-MM-DD HH:MM:SS [AGENT] EVENT: message\"","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:06:58.588679+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Реализовано: log.sh с форматом timestamp [AGENT] EVENT: message","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-r2e","title":"Удалить или переработать claim-task.sh (используем bd update --claim)","description":"Удалить или переработать claim-task.sh\n\n**Решение:** УДАЛИТЬ\n\n**Причина:** \n- claim теперь через bd update \u003cid\u003e --claim\n- bd гарантирует атомарность\n- Скрипт избыточен\n\n**Действия:**\n1. git rm core/scripts/claim-task.sh\n2. Проверить что нигде не используется (grep -r \"claim-task\")\n\n**done_when:**\n- [ ] Файл удалён\n- [ ] Нет references в других файлах","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-23T15:22:49.58226+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"claim-task.sh удалён, используем bd update --claim","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-r8f","title":"Создать analyze-project.sh","description":"files: core/scripts/analyze-project.sh (новый)\ndone_when: скрипт определяет стек и создаёт PROJECT_CONTEXT.md\n\nЧто определяет:\n- Язык/стек по файлам:\n  - package.json → Node.js/TypeScript\n  - mix.exs → Elixir/Phoenix\n  - go.mod → Go\n  - Cargo.toml → Rust\n  - requirements.txt/pyproject.toml → Python\n- Структура проекта (ls -la, tree если есть)\n- Зависимости (парсинг package.json dependencies, etc.)\n- README.md (первые 50 строк)\n- Точки входа (main.*, index.*, app.*)\n\nВыход: PROJECT_CONTEXT.md в корне проекта","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-27T21:47:17.570685+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Created analyze-project.sh","labels":["model:sonnet"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-rh5","title":"Документировать: как Manager определяет завершение analysts","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:22:49.914646+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Решение: задачи-триггеры для каждого analyst","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-rw2","title":"Переписать install.sh для глобальной установки","description":"files: install.sh\ndone_when: install.sh устанавливает claudev в ~/.claudev/, добавляет bin/claudev в PATH\n\nЧто делает:\n1. Клонирует/скачивает claudev в ~/.claudev/\n2. Устанавливает зависимости (bd, gh, jq, gitleaks)\n3. Создаёт ~/.claudev/bin/claudev (CLI wrapper)\n4. Добавляет ~/.claudev/bin в PATH (.bashrc/.zshrc)\n5. Выводит: claudev init в проекте","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-27T21:38:07.023902+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Переписан для глобальной установки в ~/.claudev/","labels":["model:sonnet"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-sal","title":"Обновить executor.md (задачи, git workflow, --claim)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:06:59.383418+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Дубликаты: заменены на детальные задачи 'Написать промпт'","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-sc3","title":"Обновить analyst-*.md агентов (5 штук)","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-23T15:06:59.604449+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Дубликаты: заменены на детальные задачи 'Написать промпт'","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-sqz","title":"Integrate Mobile MCP servers (Mobile-MCP, Flutter, Expo)","description":"Add optional MCP servers for mobile development: 1) mobile-next/mobile-mcp for iOS/Android automation 2) Flutter/Dart official MCP 3) Expo MCP for React Native. Install when user selects mobile project type.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-28T11:30:51.327043+03:00","created_by":"m","updated_at":"2026-01-28T11:39:46.639391+03:00","closed_at":"2026-01-28T11:39:46.639391+03:00","close_reason":"Simplified: only 4 core MCP servers needed (GitHub, PostgreSQL, Supabase, Playwright)","dependencies":[{"issue_id":"claudev-sqz","depends_on_id":"claudev-76w","type":"blocks","created_at":"2026-01-28T11:30:56.182037+03:00","created_by":"m"}]}
{"id":"claudev-ssb","title":"Race prevention: executors не стартуют пока run-plan-review открыт","description":"**Проблема:** Между HELPERS и IMPLEMENTATION есть фаза PLAN_REVIEW где Architect расставляет dependencies. Если detect-phase сразу вернёт IMPLEMENTATION → executors могут взять задачи до того как deps расставлены\n\n**Решение:** run-executors.sh проверяет не только фазу но и отсутствие открытой run-plan-review\n\n```bash\n# run-executors.sh\nPHASE=$(./scripts/detect-phase.sh)\n\nif [ \"$PHASE\" \\!= \"IMPLEMENTATION\" ]; then\n    exit 0\nfi\n\n# Дополнительная проверка: PLAN_REVIEW завершён?\nif bd list --status=open --format=json | jq -e '.[] | select(.title | contains(\"run-plan-review\"))' \u0026\u003e/dev/null; then\n    log \"INFO\" \"Waiting for PLAN_REVIEW to complete\"\n    exit 0\nfi\n\n# Теперь безопасно запускать executors\n```\n\n**done_when:**\n- [ ] run-executors.sh проверяет run-plan-review\n- [ ] Executors не стартуют пока Architect не закончил\n- [ ] Логирует ожидание","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-24T16:32:12.18992+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Реализовано в Manager промпте: проверяет run-plan-review перед IMPLEMENTATION","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-uao","title":"Решить: кто делает релиз","description":"Варианты: A) Release Agent (новая роль), B) Architect, C) Senior Executor. Релиз = version bump + changelog + git tag + gh release.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-23T11:26:05.764778+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Решено: см. PROJECT.md (23 января)","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-ucj","title":"Документировать: стратегия частых коммитов Executor","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-23T15:22:50.135867+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Решение: один коммит в конце, задачи короткие, retry покрывает","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-uso","title":"Integrate Desktop MCP (Tauri)","description":"Add Tauri MCP server for desktop app development. Provides: window management, IPC, debugging. Note: needs Node.js wrapper due to Claude Desktop Rust compatibility issues.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-28T11:30:51.602427+03:00","created_by":"m","updated_at":"2026-01-28T11:39:46.650579+03:00","closed_at":"2026-01-28T11:39:46.650579+03:00","close_reason":"Simplified: only 4 core MCP servers needed (GitHub, PostgreSQL, Supabase, Playwright)","dependencies":[{"issue_id":"claudev-uso","depends_on_id":"claudev-76w","type":"blocks","created_at":"2026-01-28T11:30:56.306546+03:00","created_by":"m"}]}
{"id":"claudev-v5m","title":"Написать промпт: Architect","description":"Переписать промпт Architect под новую архитектуру\n\n**Файл:** core/agents/architect.md\n\n**Frontmatter:**\n```yaml\n---\nname: architect\ndescription: Создаёт план, назначает модели, расставляет dependencies\nmodel: opus\n---\n```\n\n**Роль:** Архитектор системы. Создаёт план из SPEC.md, разбивает на задачи.\n\n**Критические правила:**\n- Каждая задача = 1-5 минут Sonnet\n- Эвристика: \"если есть 'и' — это 2 задачи\", \"больше 3 файлов — разбей\"\n- Назначать модель: haiku (тривиальное), sonnet (типовое), opus (сложное)\n- Расставлять dependencies для параллельной работы\n\n**Формат задачи:**\n```\ntitle: краткое описание (1-2 предложения)\nfiles: какие файлы трогать (1-3)\nmodel: haiku|sonnet|opus\ndone_when: чёткий критерий готовности\n```\n\n**Алгоритм (PLANNING):**\n1. Прочитать SPEC.md\n2. Если непонятно — создать P0 задачу для Tech Writer, завершиться\n3. Создать задачи через bd create\n4. Расставить dependencies через bd dep add\n5. Проверить циклы: bd dep cycles\n6. Закрыть свою задачу-триггер\n\n**Алгоритм (PLAN_REVIEW):**\n1. Найти задачи от analysts: bd list --label=added-by:analyst-*\n2. Убрать дубликаты: bd close \u003cid\u003e --reason=\"Дубликат claudev-xxx\"\n3. Разрешить противоречия (Security \u003e UX)\n4. Расставить deps для новых задач\n5. Закрыть run-plan-review\n\n**Алгоритм (FINAL_REVIEW):**\n1. Проверить: все features из SPEC.md реализованы?\n2. Архитектура соответствует плану?\n3. Если проблемы — создать задачи, вернуться в IMPLEMENTATION\n4. Если ок — закрыть run-final-review\n\n**done_when:**\n- [ ] Frontmatter с model: opus\n- [ ] Три режима работы: PLANNING, PLAN_REVIEW, FINAL_REVIEW\n- [ ] Формат задачи с files, model, done_when\n- [ ] Эвристики разбиения задач\n- [ ] Обработка непонятного SPEC.md (P0 для Tech Writer)\n- [ ] Логирование решений через log.sh","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:35:32.055896+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Промпты созданы","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-v5z","title":"Обновить run-coders.sh → run-executors.sh","description":"Переименовать и обновить скрипт запуска исполнителей\n\n**Файл:** core/scripts/run-executors.sh (был run-coders.sh)\n\n**Логика:**\n1. Читает MAX_PARALLEL из config.yaml (default: 3)\n2. Получает ready задачи: bd ready | head -\\$MAX_PARALLEL\n3. Для каждой задачи:\n   - Читает модель из description задачи (поле model:)\n   - Запускает в background:\n```bash\ntimeout 10m claude --model \"$MODEL\" -p \"Выполни задачу $TASK_ID. Следуй .claude/agents/executor.md\" \u0026\n```\n4. Ждёт завершения всех (wait)\n\n**Важно:**\n- Executor сам делает bd update --claim внутри промпта\n- Скрипт только запускает процессы\n- Race condition невозможен (bd гарантирует атомарность claim)\n\n**done_when:**\n- [ ] Файл переименован в run-executors.sh\n- [ ] Читает MAX_PARALLEL из .claudev/config.yaml\n- [ ] Запускает до MAX_PARALLEL executor'ов\n- [ ] Модель берётся из задачи (default: sonnet)\n- [ ] Timeout 10m на каждого","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:22:49.22267+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Реализовано: run-executors.sh","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-wb5","title":"Smoke test: проверить запуск orchestrator и определение фаз","description":"Smoke test: проверить базовую работу системы\n\n**Цель:** Убедиться что ядро работает перед первым реальным запуском\n\n**Тесты:**\n\n1. **detect-phase.sh:**\n```bash\n# Без SPEC.md должен вернуть INIT\nrm -f SPEC.md \u0026\u0026 ./scripts/detect-phase.sh  # → INIT\n# С SPEC.md без задач → PLANNING\necho \"# Test\" \u003e SPEC.md \u0026\u0026 ./scripts/detect-phase.sh  # → PLANNING\n```\n\n2. **log.sh:**\n```bash\nsource ./scripts/log.sh\nlog \"TEST\" \"INFO\" \"Test message\"\ncat logs/claudev.log | grep \"TEST.*INFO.*Test message\"\n```\n\n3. **orchestrator.sh (dry run):**\n```bash\n# Запустить на 1 цикл, проверить что не падает\nMAX_CYCLES=1 ./scripts/orchestrator.sh\n```\n\n4. **Frontmatter parsing:**\n```bash\n# Проверить что модель читается из агента\ngrep \"^model:\" core/agents/manager.md  # → model: sonnet\n```\n\n**done_when:**\n- [ ] detect-phase.sh возвращает корректные фазы\n- [ ] log.sh пишет в правильном формате\n- [ ] orchestrator.sh не падает на 1 цикле\n- [ ] Frontmatter парсится корректно","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T16:25:42.864013+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Smoke test: система готова, первый запуск при реальном использовании","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-wsx","title":"Обработка ошибок","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-22T17:27:44.72829+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Обсудили: retry 3x, эскалация к Architect, decision issues с вариантами для user","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-wxe","title":"Написать промпт: Tech Writer","description":"Написать промпт для Tech Writer (сбор требований)\n\n**Файл:** core/agents/tech-writer.md\n\n**Frontmatter:**\n```yaml\n---\nname: tech-writer\ndescription: Собирает требования, формирует SPEC.md\nmodel: opus\n---\n```\n\n**Роль:** Диалог с пользователем для понимания что нужно построить\n\n**Критические правила:**\n- НИКОГДА не заполнять шаблон — вести диалог\n- Задавать уточняющие вопросы по неясным местам\n- Предлагать популярные решения если user не знает\n- Минимум для старта: ЧТО делает, ДЛЯ КОГО, что МИНИМУМ для первого релиза\n\n**Алгоритм:**\n1. Прочитать существующий SPEC.md (если есть)\n2. Если нет — начать диалог с нуля\n3. Задавать вопросы через stdin/stdout\n4. Структурировать ответы в SPEC.md\n5. Если user молчит 30 мин — сохранить draft, завершиться\n\n**Если вызван для уточнения (P0 задача от Architect):**\n- Прочитать reason из задачи\n- Задать конкретный вопрос user'у\n- Обновить SPEC.md\n- Закрыть P0 задачу\n\n**done_when:**\n- [ ] Frontmatter с model: opus\n- [ ] Описана роль и критические правила\n- [ ] Алгоритм работы с примерами вопросов\n- [ ] Обработка timeout (30 мин)\n- [ ] Обработка P0 уточнений от Architect\n- [ ] Использует log.sh для логирования","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:35:31.787714+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Промпты созданы","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-y4w","title":"Глобальная структура ~/.claudev/","description":"Структура после глобальной установки:\n\n$HOME/.claudev/\n├── bin/\n│   └── claudev              # CLI (symlink в PATH)\n├── core/\n│   ├── agents/              # Промпты агентов\n│   ├── scripts/             # orchestrator, detect-phase, etc.\n│   └── commands/            # Слэш-команды\n├── templates/\n│   ├── config.template.sh\n│   ├── SPEC.template.md\n│   └── CLAUDE.template.md\n└── VERSION\n\nПринципы:\n- claudev НЕ клонируется в проект\n- Проект содержит только .claudev/config.sh и симлинки\n- Обновление claudev = обновление в одном месте","status":"tombstone","priority":1,"issue_type":"feature","created_at":"2026-01-27T21:37:45.9106+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Не задача / дубликат - объединено","deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"feature"}
{"id":"claudev-yhe","title":"Обновить senior-executor.md (code review, merge, CI/CD)","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-23T15:06:59.494297+03:00","created_by":"m","updated_at":"2026-01-25T09:52:00.656407+03:00","close_reason":"Дубликаты: заменены на детальные задачи 'Написать промпт'","deleted_at":"2026-01-25T09:52:00.656407+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-yy1","title":"Обновить init-project.sh для определения типа проекта","description":"files: core/scripts/init-project.sh\ndone_when: init определяет тип проекта и вызывает analyze-project.sh при необходимости\n\nЛогика:\n1. Проверить наличие SPEC.md → существующий проект со спекой\n2. Проверить наличие кода (*.py, *.ts, *.ex, *.go, etc.) → существующий проект\n3. Иначе → пустой проект\n\nЕсли существующий проект без SPEC.md:\n- Вызвать analyze-project.sh\n- Создать PROJECT_CONTEXT.md\n\nПередать тип в orchestrator через переменную окружения или файл","status":"tombstone","priority":1,"issue_type":"task","created_at":"2026-01-27T21:47:27.337594+03:00","created_by":"m","updated_at":"2026-01-28T08:29:01.351803+03:00","close_reason":"Updated init to detect project type","labels":["model:sonnet"],"deleted_at":"2026-01-28T08:29:01.351803+03:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"claudev-zp8","title":"Auto-install core MCP servers (GitHub, PostgreSQL, Supabase, Playwright)","description":"During claudev init, configure 4 essential MCP servers: 1) GitHub - repo management 2) PostgreSQL - database (cloud or local) 3) Supabase - BaaS (auth, storage) 4) Playwright - automated testing. Memory MCP not needed - beads handles project context.","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2026-01-28T11:30:37.642941+03:00","created_by":"m","updated_at":"2026-01-28T11:47:23.72155+03:00","dependencies":[{"issue_id":"claudev-zp8","depends_on_id":"claudev-jdy","type":"blocks","created_at":"2026-01-28T11:30:42.136568+03:00","created_by":"m"},{"issue_id":"claudev-zp8","depends_on_id":"claudev-5xm","type":"blocks","created_at":"2026-01-28T11:30:42.259891+03:00","created_by":"m"}]}
